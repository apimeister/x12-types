use super::*;
use crate::util::Parser;

#[test]
fn parse_820_01() {
    //source: https://github.com/EdiFabric/X12.NET/blob/master/Files/HIPAA/PaymentOrder.txt
    let str = r#"ISA*00*          *00*          *ZZ*1234567        *ZZ*11111          *170508*1141*^*00501*000000101*1*P*:~
GS*HC*XXXXXXX*XXXXX*20170617*1741*101*X*005010X218~
ST*820*0001*005010X218~
BPR*C*19000*C*ACH*CTX*01*999999992*DA*12345678*1030449999**01*199999999*DA*98765*20070516~
TRN*1*12345*1030449999~
REF*14*12345~
N1*PE*DEF HEALTH CARE INC.*FI*012222222~
N1*PR*ABC PLASTICS*FI*123456789~
ENT*1*2L*FI*123456789~
RMR*IK*970501001*PI*16500~
IT1*1~
SLN*1**O*5*IE~
SLN*2**O*75*10~
RMR*IK*970501002*PI*250~
IT1*1~
SLN*1**O*25*IE~
SE*15*0001~
GE*1*101~
IEA*1*000000101~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}

#[test]
fn parse_820_02() {
    //source: https://github.com/EdiFabric/X12.NET/blob/master/Files/HIPAA/PaymentOrderRemittanceAdvice.txt
    let str = r#"ISA*00*          *00*          *ZZ*1234567        *ZZ*11111          *170508*1141*^*00501*000000101*1*P*:~
GS*HC*XXXXXXX*XXXXX*20170617*1741*101*X*005010X306~
ST*820*0001*005010X306~
BPR*I*220*C*ACH*CCP*******01*199999999*DA*98765*20140604~
TRN*3*78905~
REF*38*123456~
REF*TV*12565496~
N1*PE*BATA INSURANCE CO.*FI*012222222~
N1*RM*GOVERNMENT AGENCY*58*123ABC~
ENT*1~
NM1*IL*1*DOE*JOHN****C1*777222~
REF*POL*1232456~
REF*AZ*12565496~
REF*0F*555666~
RMR*ZZ*APTC**35~
DTM*582****RD8*20120501-20140531~
ENT*2~
NM1*IL*1*FIRSTONE*EMILY****C1*777333~
REF*POL*1232457~
REF*AZ*12565497~
REF*0F*555777~
RMR*ZZ*APTC**35~
DTM*582****RD8*20120501-20140531~
ENT*3~
NM1*IL*1*MIDDLEONE*JULIE****C1*777444~
REF*POL*1232458~
REF*AZ*12565498~
REF*0F*544477~
RMR*ZZ*APTC**-350~
DTM*582****RD8*20140101-20140331~
ENT*4~
NM1*IL*1*NEWONE*KELLY****C1*777111~
REF*POL*1232459~
REF*AZ*12565499~
RMR*ZZ*APTC**450~
DTM*582****RD8*20140501-20140531~
RMR*ZZ*CSR**50~
DTM*582****RD8*20140501-20140531~
SE*37*0001~
GE*1*101~
IEA*1*000000101~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}

#[test]
fn parse_820_03() {
    //source: https://github.com/Project-Herophilus/Project-Herophilus-Assets/blob/main/Testing/TestData/samples-edi/820%20Child%20Health%20Plus%20Payment%20(EFT).txt
    let str = r#"ISA*00*          *00*          *ZZ*EMEDNYBAT      *ZZ*ETIN           *141231*1159*^*00501*003333333*0*T*:~GS*RA*EMEDNYBAT*ETIN*20141231*11595900*333333333*X*005010X218~ST*820*222222222*005010X218~BPR*I*239.6*C*ACH*CCP*01*111111111***1141797357**01*012345678*DA*111111111*20150121~TRN*3*021300000000000*1141797357~REF*14*12345678~N1*PE*MANAGED CARE*FI*123456789~N1*PR*CHILD HEALTH PLUS~ENT*1*2L*24*141797357~RMR*1L*12345678**-5.55~REF*ZZ*RECOVERY OF FUNDS~RMR*1L*12345678**96.96~REF*ZZ*LUMP SUM PAYMENT~ENT*2*2J*EI*PATIENT ACCOUNT NUMBER~NM1*QE*1*LAST NAME*FIRST NAME****N*LL99999L~RMR*AZ*12345678**148.19~REF*ZZ*1436500000001230~REF*ZZ*0123456789~REF*LU*01~DTM*582****RD8*20141201-20141231~SE*17*222222222~GE*1*333333333~IEA*1*003333333~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}

#[test]
fn parse_820_04() {
    //source: https://github.com/Project-Herophilus/Project-Herophilus-Assets/blob/main/Testing/TestData/samples-edi/820%20Essentail%20Health%20Plan.txt
    let str = r#"ISA*00*          *00*          *ZZ*EMEDNYBAT      *ZZ*ETIN           *150105*1132*^*00501*005113240*0*T*:~GS*RA*EMEDNYBAT*ETIN*20150105*11323900*5113240*X*005010X218~ST*820*221500001*005010X218~BPR*I*123.45*C*CHK******1141797357******20150105~TRN*3*000000032788113*1141797357~REF*14*12345678~N1*PE**FI*123456789~N1*PR*BASIC HEALTH PLAN~N3*OFFICE OF HEALTH INSURANCE PROGRAMS*CORNING TOWER, EMPIRE STATE PLAZA~N4*ALBANY*NY*122370080~ENT*1*2J*EI*LL88888L~NM1*QE*1*LASTNAME*FIRSTNAME****N*LL88888L~RMR*AZ*LL88888L**123.45~REF*ZZ*1500311111112540~REF*ZZ*0123456789~REF*LU*01~REF*ZZ*51~DTM*582****RD8*20141201-20141231~SE*14*221500001~GE*1*5113240~IEA*1*005113240~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}

#[test]
fn parse_820_05() {
    //source: https://github.com/Project-Herophilus/Project-Herophilus-Assets/blob/main/Testing/TestData/samples-edi/820%20Premium%20Payment%20(EFT).txt
    let str = r#"ISA*00*          *00*          *ZZ*EMEDNYBAT      *ZZ*ETIN           *141231*1159*^*00501*003333333*0*T*:~GS*RA*EMEDNYBAT*ETIN*20141231*11595900*333333333*X*005010X218~ST*820*222222222*005010X218~BPR*I*566.29*C*ACH*CCP*01*111111111***1141797357**01*012345678*DA*111111111*20150121~TRN*3*021300000000000*1141797357~REF*14*12345678~N1*PE*MANAGED CARE*FI*123456789~N1*PR*NYSDOH*FI*141797357~ENT*1*2L*24*141797357~RMR*1L*12345678**-63.34~REF*ZZ*RECOVERY OF FUNDS~RMR*1L*12345678**8.89~REF*ZZ*COURT ORDERED PAYMENT~RMR*1L*12345678**-12.67~REF*ZZ*STATE MANDATED PAYMENT REDUCT~ENT*2*2J*EI*PATIENT ACCOUNT NUMBER~NM1*QE*1*LAST NAME*FIRST NAME****N*LL99999L~RMR*IK*1000210000000020**183.47*1.83~ADX*181.64*IA~ENT*3*2J*EI*PATIENT ACCOUNT NUMBER~NM1*QE*1*LAST NAME*FIRST NAME****N*LL88888L~RMR*IK*1000210000000020**449.94*4.49~ADX*445.45*IA~SE*22*222222222~GE*1*333333333~IEA*1*003333333~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}

#[test]
fn parse_820_06() {
    //source: https://github.com/Project-Herophilus/Project-Herophilus-Assets/blob/main/Testing/TestData/samples-edi/820%20Premium%20Payment%20(No%20Payment).txt
    let str = r#"ISA*00*          *00*          *ZZ*EMEDNYBAT      *ZZ*ETIN           *130804*1121*^*00501*006000001*0*T*:~GS*RA*EMEDNYBAT*ETIN*20100101*11212100*6000001*X*005010X218~ST*820*173900001*005010X218~BPR*I*0*C*NON******1234567890******20100101~TRN*3*021300000000000*1123456789~REF*14*12345678~N1*PE*MANAGED CARE*FI*123456789~N1*PR*NYSDOH*FI*141797357~N3*OFFICE OF HEALTH INSURANCE PROGRAMS*CORNING TOWER, EMPIRE STATE PLAZA~N4*ALBANY*NY*12204~ENT*1*2L*24*141797357~RMR*1L*01234567**-63.37~REF*ZZ*RECOVERY OF FUNDS~RMR*1L*01234567**-56.63~REF*ZZ*STATE MANDATED PAYMENT REDUCT~ENT*2*2J*EI*PATIENT ACCOUNT NUMBER~NM1*QE*1*LAST NAME*FIRST NAME****N*LL88888L~RMR*IK*1320600000000020**120*2971.11~ADX*-2851.11*H1~SE*18*173900001~GE*1*6000001~IEA*1*006000001~"#;
    let (rest, obj) = Transmission::<_820>::parse(str).unwrap();
    println!("{rest}");
    println!("{obj:?}");
    assert!(rest.is_empty());
}
